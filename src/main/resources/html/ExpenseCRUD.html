<!DOCTYPE html>
<html lang="pr-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Página de Despesas</title>
</head>

<body>
    <div class="container">
        <header>
            <div id="logoFADERGS"></div>

            <div id="headerTitle">
                <p>Gestão e Qualidade de Software - 2024/1</p><br>
                <p>Projeto A3</p>
            </div>

            <div id="logoANIMA"></div>
        </header>

        <main>
            <div id="navBar">
                |
                <a href="./LoginPage.HTML">Pagina de Login</a> |
                <a href="./UserCRUD.html">Usuários</a> |
                <a href="./ClientCRUD.html">Clientes</a> |
                <a href="./ExpenseCRUD.html">Despesas</a> |
            </div>

            <div id="testContent">
                <div id="TCTitle">Despesas</div>

                <div id="TCMainContent">
                    <!-- <style>
                        body {
                            font-family: Arial, sans-serif;
                            margin: 20px;
                        }

                        table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-bottom: 20px;
                        }

                        th,
                        td {
                            border: 1px solid #dddddd;
                            text-align: left;
                            padding: 8px;
                        }

                        th {
                            background-color: #f2f2f2;
                        }

                        .form-container {
                            margin-bottom: 20px;
                        }

                        .form-group {
                            margin-bottom: 10px;
                        }

                        .form-group label {
                            display: block;
                            margin-bottom: 5px;
                        }

                        .form-group input,
                        .form-group select {
                            width: 100%;
                            padding: 8px;
                            box-sizing: border-box;
                        }
                    </style> -->

                    <div id="ExpenseContent">
                        <div class="form-containerEx">
                            <div class="form-group">
                                <label for="nomeCredor">Nome do Credor</label>
                                <input type="text" id="nomeCredor">
                            </div>
                            <div class="form-group">
                                <label for="baseFisica">Base Física (local)</label>
                                <input type="text" id="baseFisica">
                            </div>
                            <div class="form-group">
                                <label for="tipoDespesa">Tipo de Despesa</label>
                                <input type="text" id="tipoDespesa">
                            </div>
                            <div class="form-group">
                                <label>Mês de Competência</label>
                                <select id="diaCompetencia">
                                    <option>Dia</option>
                                    <!-- Dias de 1 a 31 -->
                                    <script>
                                        for (let i = 1; i <= 31; i++) {
                                            document.write('<option value="' + i + '">' + i + '</option>');
                                        }
                                    </script>
                                </select>
                                <select id="mesCompetencia">
                                    <option>Mês</option>
                                    <option value="1">Janeiro</option>
                                    <option value="2">Fevereiro</option>
                                    <option value="3">Março</option>
                                    <option value="4">Abril</option>
                                    <option value="5">Maio</option>
                                    <option value="6">Junho</option>
                                    <option value="7">Julho</option>
                                    <option value="8">Agosto</option>
                                    <option value="9">Setembro</option>
                                    <option value="10">Outubro</option>
                                    <option value="11">Novembro</option>
                                    <option value="12">Dezembro</option>
                                </select>
                                <select id="anoCompetencia">
                                    <option>Ano</option>
                                    <!-- Anos de 2000 a 2030 -->
                                    <script>
                                        for (let i = 2000; i <= 2030; i++) {
                                            document.write('<option value="' + i + '">' + i + '</option>');
                                        }
                                    </script>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="dataVencimento">Data de Vencimento</label>
                                <input type="date" id="dataVencimento">
                            </div>
                            <div class="form-group">
                                <label for="valorLiquido">Valor Líquido</label>
                                <input type="number" id="valorLiquido" oninput="validarNumero(this)"
                                    placeholder="Ex: 123456">
                            </div>
                            <div class="form-group">
                                <label for="valorJuros">Valor Juros</label>
                                <input type="number" id="valorJuros" oninput="calcularMulta()">
                            </div>
                            <div class="form-group">
                                <label for="valorCorrecao">Valor Correção</label>
                                <input type="number" id="valorCorrecao">
                            </div>
                            <div class="form-group">
                                <label for="valorTotal">Valor Total</label>
                                <input type="number" id="valorTotal">
                            </div>
                            <div class="form-group">
                                <label for="valorMulta">Valor Multa</label>
                                <input type="number" id="valorMulta" readonly>
                            </div>
                        </div>
                        <!-- <style>
                            #addDispesa {
                                    padding: 10px 20px;
                                    background-color: #04911b;
                                    color: #fff;
                                    border: none;
                                    border-radius: 5px;
                                    cursor: pointer;
                                }

                                #addDispesa:hover {
                                    background-color: #00ad1d;
                                }
                        </style> -->

                        <div id="ExpenseTable">
                            <button onclick="adicionarDespesa()" id="addDispesa">Adicionar Despesa</button>
                            <div id="TableContainer">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Nome do Credor</th>
                                            <th>Base Física (local)</th>
                                            <th>Tipo de Despesa</th>
                                            <th>Mês de Competência</th>
                                            <th>Data de Vencimento</th>
                                            <th>Valor Líquido</th>
                                            <th>Valor Multa</th>
                                            <th>Valor Juros</th>
                                            <th>Valor Correção</th>
                                            <th>Valor Total</th>
                                        </tr>
                                    </thead>
                                    <tbody id="despesasTableBody">
                                        <!-- As despesas serão adicionadas aqui -->
                                    </tbody>
                                </table>

                            </div>

                            <script>
                                // Função para validar a entrada de número
                                function validarNumero(input) {
                                    input.value = input.value.replace(/[^\d.]/g, '');
                                }

                                // Função para calcular a multa
                                function calcularMulta() {
                                    const valorLiquido = parseFloat(document.getElementById('valorLiquido').value) || 0;
                                    const valorJuros = parseFloat(document.getElementById('valorJuros').value) || 0;

                                    // Calcula a multa 
                                    const valorMulta = (valorLiquido * (valorJuros / 100));

                                    document.getElementById('valorMulta').value = valorMulta.toFixed(2);
                                }

                                // Função para adicionar despesas à tabela
                                function adicionarDespesa() {
                                    const tableBody = document.getElementById('despesasTableBody');
                                    const newRow = document.createElement('tr');

                                    // Pegando os valores dos campos de entrada
                                    const nomeCredor = document.getElementById('nomeCredor').value;
                                    const baseFisica = document.getElementById('baseFisica').value;
                                    const tipoDespesa = document.getElementById('tipoDespesa').value;
                                    const diaCompetencia = document.getElementById('diaCompetencia').value;
                                    const mesCompetencia = document.getElementById('mesCompetencia').value;
                                    const anoCompetencia = document.getElementById('anoCompetencia').value;
                                    const dataVencimento = document.getElementById('dataVencimento').value;
                                    const valorLiquido = parseFloat(document.getElementById('valorLiquido').value) || 0;
                                    const valorJuros = parseFloat(document.getElementById('valorJuros').value) || 0;
                                    const valorCorrecao = parseFloat(document.getElementById('valorCorrecao').value) || 0;
                                    const valorMulta = parseFloat(document.getElementById('valorMulta').value) || 0;
                                    const valorTotal = valorLiquido + valorCorrecao + valorMulta;

                                    // Criando as células da nova linha
                                    newRow.innerHTML = `
                                    <td>${nomeCredor}</td>
                                    <td>${baseFisica}</td>
                                    <td>${tipoDespesa}</td>
                                    <td>${diaCompetencia}/${mesCompetencia}/${anoCompetencia}</td>
                                    <td>${dataVencimento}</td>
                                    <td>${valorLiquido.toFixed()}</td>
                                    <td>${valorMulta.toFixed()}</td>
                                    <td>${valorJuros.toFixed()}</td>
                                    <td>${valorCorrecao.toFixed(2)}</td>
                                    <td>${valorTotal.toFixed(2)}</td>
                                                        `;

                                    // Adicionando a nova linha ao corpo da tabela
                                    tableBody.appendChild(newRow);
                                }
                            </script>

                        </div>

                    </div>

                </div>

            </div>

        </main>

        <footer>

        </footer>
    </div>
</body>
</html>