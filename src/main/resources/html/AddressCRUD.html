<!DOCTYPE html>
<html lang="pr-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Página de Bases Fixas</title>
</head>

<body>
    <div class="container">
        <header>
            <div id="logoFADERGS"></div>

            <div id="headerTitle">
                <p>Gestão e Qualidade de Software - 2024/1</p><br>
                <p>Projeto A3</p>
            </div>

            <div id="logoANIMA"></div>
        </header>

        <main>
            <div id="navBar">
                |
                <a href="./LoginPage.HTML">Login</a> |
                <a href="./UserCRUD.html">Usuários</a> |
                <a href="./CreditorCRUD.html">Credores</a> |
                <a href="./AddressCRUD.html">Bases</a> |
                <a href="./ExpenseCRUD.html">Despesas</a> |
                <a href="./EntryCRUD.html">Lançamentos</a> |
            </div>

            <div id="testContent">
                <div id="TCTitle">Bases Fixas</div>

                <div id="TCMainContent">
                    
                    <form id="baseForm">
                        <label for="idUsuario">ID do Usuário:</label>
                        <input type="number" id="idUsuario" name="idUsuario" required><br>
                    
                        <label for="nomeBase">Nome da Base:</label>
                        <input type="text" id="nomeBase" name="nomeBase" required><br>
                    
                        <label for="responsavelBase">Responsável da Base:</label>
                        <input type="text" id="responsavelBase" name="responsavelBase" required><br>
                    
                        <label for="telefoneBase">Telefone da Base:</label>
                        <input type="text" id="telefoneBase" name="telefoneBase" required><br>
                    
                        <label for="celularBase">Celular da Base:</label>
                        <input type="text" id="celularBase" name="celularBase"><br>
                    
                        <label for="emailBase">Email da Base:</label>
                        <input type="email" id="emailBase" name="emailBase" required><br>
                    
                        <label for="ativo">Ativo:</label>
                        <select id="ativo" name="ativo">
                          <option value="S">Sim</option>
                          <option value="N">Não</option>
                        </select><br>
                    
                        <button type="button" onclick="addBase()">Adicionar Base</button>
                        <button type="button" onclick="updateBase()">Atualizar Base</button>
                      </form>
                    
                      <h2>Lista de Bases</h2>
                      <table id="baseTable">
                        <thead>
                          <tr>
                            <th>ID do Usuário</th>
                            <th>Nome da Base</th>
                            <th>Responsável da Base</th>
                            <th>Telefone da Base</th>
                            <th>Celular da Base</th>
                            <th>Email da Base</th>
                            <th>Ativo</th>
                            <th>Ações</th>
                          </tr>
                        </thead>
                        <tbody>
                          
                        </tbody>
                      </table>
                    
                      <script>
                        let selectedRow = null;
                    
                        function addBase() {
                          const idUsuario = document.getElementById('idUsuario').value;
                          const nomeBase = document.getElementById('nomeBase').value;
                          const responsavelBase = document.getElementById('responsavelBase').value;
                          const telefoneBase = document.getElementById('telefoneBase').value;
                          const celularBase = document.getElementById('celularBase').value;
                          const emailBase = document.getElementById('emailBase').value;
                          const ativo = document.getElementById('ativo').value;
                    
                          if (selectedRow == null) {
                            const table = document.getElementById('baseTable').getElementsByTagName('tbody')[0];
                            const newRow = table.insertRow();
                    
                            newRow.insertCell(0).innerHTML = idUsuario;
                            newRow.insertCell(1).innerHTML = nomeBase;
                            newRow.insertCell(2).innerHTML = responsavelBase;
                            newRow.insertCell(3).innerHTML = telefoneBase;
                            newRow.insertCell(4).innerHTML = celularBase;
                            newRow.insertCell(5).innerHTML = emailBase;
                            newRow.insertCell(6).innerHTML = ativo;
                            newRow.insertCell(7).innerHTML = `<button onclick="editBase(this)">Editar</button>
                                                              <button onclick="deleteBase(this)">Excluir</button>`;
                    
                            document.getElementById('baseForm').reset();
                          } else {
                            updateBase();
                          }
                        }
                    
                        function editBase(td) {
                          selectedRow = td.parentElement.parentElement;
                          document.getElementById('idUsuario').value = selectedRow.cells[0].innerHTML;
                          document.getElementById('nomeBase').value = selectedRow.cells[1].innerHTML;
                          document.getElementById('responsavelBase').value = selectedRow.cells[2].innerHTML;
                          document.getElementById('telefoneBase').value = selectedRow.cells[3].innerHTML;
                          document.getElementById('celularBase').value = selectedRow.cells[4].innerHTML;
                          document.getElementById('emailBase').value = selectedRow.cells[5].innerHTML;
                          document.getElementById('ativo').value = selectedRow.cells[6].innerHTML;
                        }
                    
                        function updateBase() {
                          if (selectedRow != null) {
                            selectedRow.cells[0].innerHTML = document.getElementById('idUsuario').value;
                            selectedRow.cells[1].innerHTML = document.getElementById('nomeBase').value;
                            selectedRow.cells[2].innerHTML = document.getElementById('responsavelBase').value;
                            selectedRow.cells[3].innerHTML = document.getElementById('telefoneBase').value;
                            selectedRow.cells[4].innerHTML = document.getElementById('celularBase').value;
                            selectedRow.cells[5].innerHTML = document.getElementById('emailBase').value;
                            selectedRow.cells[6].innerHTML = document.getElementById('ativo').value;
                    
                            selectedRow = null;
                            document.getElementById('baseForm').reset();
                          }
                        }
                    
                        function deleteBase(td) {
                          if (confirm('Tem certeza que deseja excluir esta base?')) {
                            const row = td.parentElement.parentElement;
                            document.getElementById('baseTable').deleteRow(row.rowIndex);
                            document.getElementById('baseForm').reset();
                          }
                        }
                      </script>
                   

                </div>

            </div>

        </main>

        <footer>

        </footer>
    </div>
</body>
</html>