<!DOCTYPE html>
<html lang="pr-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styles.css">
        <title>Página de Usuários</title>
    </head>
    <body>
        <div class="container">
            <header>
                <div id="logoFADERGS"></div>

                <div id="headerTitle">
                    <p>Gestão e Qualidade de Software - 2024/1</p><br>
                    <p>Projeto A3</p>
                </div>
                    
                <div id="logoANIMA"></div>
            </header>
            
            <main>
                <div id="navBar">
                    |
                    <a href="./LoginPage.HTML">Login</a> |
                    <a href="./UserCRUD.html">Usuários</a> |
                    <a href="./CreditorCRUD.html">Credores</a> |
                    <a href="./AddressCRUD.html">Bases</a> |
                    <a href="./ExpenseCRUD.html">Despesas</a> |
                    <a href="./EntryCRUD.html">Lançamentos</a> |
                </div>

                <div id="testContent">
                    <div id="TCTitle">
                        Usuários
                    </div>

                    <div id="TCMainContent">
                        <form id="usuarioForm">
                            <label for="nomeUsuario">Nome do Usuário:</label>
                            <input type="text" id="nomeUsuario" name="nomeUsuario" required><br>
                        
                            <label for="emailUsuario">Email do Usuário:</label>
                            <input type="email" id="emailUsuario" name="emailUsuario" required><br>
                        
                            <label for="loginUsuario">Login do Usuário:</label>
                            <input type="text" id="loginUsuario" name="loginUsuario" required><br>
                        
                            <label for="senhaUsuario">Senha do Usuário:</label>
                            <input type="password" id="senhaUsuario" name="senhaUsuario" required><br>
                        
                            <label for="telefoneCelular">Telefone Celular:</label>
                            <input type="text" id="telefoneCelular" name="telefoneCelular"><br>

                            <label for="perfilUsuario">Perfil de Usuário:</label>
                            <input type="text" id="perfilUsuario" name="perfilUsuario"><br>
                        
                            <label for="ativo">Ativo:</label>
                            <select id="ativo" name="ativo">
                              <option value="S">Sim</option>
                              <option value="N">Não</option>
                            </select><br>
                        
                            <button id="adicionarUsuario" type="button" onclick="addUsuario()">Adicionar Usuário</button>
                            <button id="atualizarUsuario" type="button" onclick="updateUsuario()">Atualizar Usuário</button>
                          </form>
                        
                          <h2>Lista de Usuários</h2>
                          <div id="tableContainer">
                              <table id="usuarioTable">
                                <thead>
                                  <tr>
                                    <th>Nome do Usuário</th>
                                    <th>Email do Usuário</th>
                                    <th>Login do Usuário</th>
                                    <th>Senha do Usuário</th>
                                    <th>Telefone Celular</th>
                                    <th>Perfil de Usuário</th>
                                    <th>Ativo</th>
                                    <th>Ações</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  
                                </tbody>
                              </table>
                          </div>
                        
                          <script>
                            let selectedRow = null;
                        
                            function addUsuario() {
                              const nomeUsuario = document.getElementById('nomeUsuario').value;
                              const emailUsuario = document.getElementById('emailUsuario').value;
                              const loginUsuario = document.getElementById('loginUsuario').value;
                              const senhaUsuario = document.getElementById('senhaUsuario').value;
                              const telefoneCelular = document.getElementById('telefoneCelular').value;
                              const perfilUsuario = document.getElementById('perfilUsuario').value;
                              const ativo = document.getElementById('ativo').value;
                        
                              if (selectedRow == null) {
                                const table = document.getElementById('usuarioTable').getElementsByTagName('tbody')[0];
                                const newRow = table.insertRow();
                        
                                newRow.insertCell(0).innerHTML = nomeUsuario;
                                newRow.insertCell(1).innerHTML = emailUsuario;
                                newRow.insertCell(2).innerHTML = loginUsuario;
                                newRow.insertCell(3).innerHTML = senhaUsuario;
                                newRow.insertCell(4).innerHTML = telefoneCelular;
                                newRow.insertCell(5).innerHTML = perfilUsuario;
                                newRow.insertCell(6).innerHTML = ativo;
                                newRow.insertCell(7).innerHTML = `<button onclick="editUsuario(this)">Editar</button>
                                                                  <button onclick="deleteUsuario(this)">Excluir</button>`;
                        
                                document.getElementById('usuarioForm').reset();
                              } else {
                                updateUsuario();
                              }
                            }
                        
                            function editUsuario(td) {
                                selectedRow = td.parentElement.parentElement;
                                document.getElementById('nomeUsuario').value = selectedRow.cells[0].innerHTML;
                                document.getElementById('emailUsuario').value = selectedRow.cells[1].innerHTML;
                                document.getElementById('loginUsuario').value = selectedRow.cells[2].innerHTML;
                                document.getElementById('senhaUsuario').value = selectedRow.cells[3].innerHTML;
                                document.getElementById('telefoneCelular').value = selectedRow.cells[4].innerHTML;
                                document.getElementById('perfilUsuario').value = selectedRow.cells[5].innerHTML;
                                document.getElementById('ativo').value = selectedRow.cells[6].innerHTML;
                            }
                        
                            function updateUsuario() {
                                if (selectedRow != null) {
                                  selectedRow.cells[0].innerHTML = document.getElementById('nomeUsuario').value;
                                  selectedRow.cells[1].innerHTML = document.getElementById('emailUsuario').value;
                                  selectedRow.cells[2].innerHTML = document.getElementById('loginUsuario').value;
                                  selectedRow.cells[3].innerHTML = document.getElementById('senhaUsuario').value;
                                  selectedRow.cells[4].innerHTML = document.getElementById('telefoneCelular').value;
                                  selectedRow.cells[5].innerHTML = document.getElementById('perfilUsuario').value;
                                  selectedRow.cells[6].innerHTML = document.getElementById('ativo').value;
                          
                                  selectedRow = null;
                                  document.getElementById('usuarioForm').reset();
                                }
                            }
                        
                            function deleteUsuario(td) {
                                if (confirm('Tem certeza que deseja excluir este usuário?')) {
                                  const row = td.parentElement.parentElement;
                                  document.getElementById('usuarioTable').deleteRow(row.rowIndex);
                                  document.getElementById('usuarioForm').reset();
                                }
                            }
                          </script>

                    </div>

                </div>
    
            </main>
    
            <footer>
    
            </footer>
        </div>
    </body>
</html>